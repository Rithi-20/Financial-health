# Working Capital Cycle Calculation Addition for main.py
# Insert after line 406 (after saving_actions definition)

    # 9. Working Capital Cycle Metrics
    estimated_receivables = sales * 0.15
    dso = round((estimated_receivables / sales) * 365, 1) if sales > 0 else 0
    estimated_payables = expenses * 0.10
    dpo = round((estimated_payables / expenses) * 365, 1) if expenses > 0 else 0
    dio = round((inventory / expenses) * 365, 1) if expenses > 0 else 0
    ccc = round(dso + dio - dpo, 1)
    
    working_capital_metrics = {
        "dso": dso,
        "dpo": dpo,
        "dio": dio,
        "ccc": ccc,
        "inventory_turnover": round(expenses / inventory, 2) if inventory > 0 else 0,
        "working_capital_ratio": round(working_capital / expenses, 2) if expenses > 0 else 0
    }
